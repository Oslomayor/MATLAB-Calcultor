# MATLAB-Calcultor
纯代码编写的 MATLAB GUI计算器

## 1. 效果展示

![](https://github.com/Oslomayor/Markdown-Imglib/blob/master/Imgs/MATLAB_Calcultor.png?raw=true)

## 2. 原理介绍

#### 主窗体

采用 MATLAB figure 函数构建主窗体，设置相关属性

```MATLAB
GUI.fh = figure(...
    'units','pixels',...
    'numbertitle','off',...
    'name','我为何这么帅',...
    'menubar','none',...
    'WindowButtonMotionFcn',@func_refresh,...
    'position',[500 300 360 460]);
```

#### 按钮和文本框

采用 MATLAB uicontrol 函数，设置相关属性和 Callback 函数。uicontrol 创建的对象的 Style 属性默认是 Button

```matlab
% 按钮0
GUI.Button_0 = uicontrol(...
    'Parent',GUI.fh,...
    'position',[10 10 130 50],...
    'String','0',...
    'fontsize',18,...
    'callback',@func_0);
% 显示结果的文本框
GUI.Text = uicontrol(...
    'Parent',GUI.fh,...
    'Style','text',...
    'BackgroundColor','white',...
    'Position',[10 310 340 100],...
    'hor','right',...
    'String','',...
    'fontsize',28);
```

#### 计算过程

采用一个字符型变量来缓存输入的内容，按下’等于‘按钮时，使用 MATLAB eval 函数计算表达式的值

#### 刷新文本框

设置 figure 的'WindowButtonMotionFcn'为刷新函数，每当鼠标在主窗体内移动时，实现刷新。还有一种方法是通过定时器实现刷新。理论上最好的刷新方式，是每当按下任意主窗体中一个按钮时，显示刷新，但是 figure 的'WindowButtonDownFcn' 仅对鼠标单击在主窗体上有效果，对于单击主窗体的子对象无效。
